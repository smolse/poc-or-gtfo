FROM python:3.11-slim

WORKDIR /tabpy

RUN pip install numpy\<2 pyarrow==14.0.0 tabpy==2.13.0

ENV TABPY_TRANSFER_PROTOCOL=https
ENV TABPY_CERTIFICATE_FILE=/tabpy/server_crt.pem
ENV TABPY_KEY_FILE=/tabpy/server_key.pem
ENV TABPY_ARROW_ENABLE=true

EXPOSE 13622

CMD ["tabpy", "--disable-auth-warning"]
